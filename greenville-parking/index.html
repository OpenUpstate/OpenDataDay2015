<!doctype html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Downtown Greenville, SC Parking Map</title>
    <meta name="author" content="OpenUpstate"/>
    <link rel="stylesheet" href="bower_components/foundation/css/foundation.css"/>
    <link rel="stylesheet" href="assets/style.css"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
</head>
<body>

    <div class="row">
        <div class="small-12 medium-4 large-6 columns namelogo">
            <h1>Downtown Greenville, SC Parking</h1>
        </div>
    </div>

    <div class="hero">
        <div id="map-canvas" style="width: 100%; height: 500px;"></div>
    </div>

    <div class="row" id="parking-list" style="padding: 20px 0px;">

        <div class="row" v-repeat="d: data">
            <div class="large-2 columns small-3" style="padding-top: 10px;"><img src="http://placehold.it/120x120&text=[img]"/></div>
            <div class="large-10 columns">
                <h3>{{ d['Lot Name'] }}: <i><small>{{ d['Street Address'] }}, {{ d.Zip }} </small></i></h3>
                <p><strong>Some Person said:</strong>{{ d.Description }}</p>
                <ul class="inline-list">
                    <li><srong>Rates:</srong> {{ d.rates }}</li>
                </ul>
            </div>
            <hr/>
        </div>

    </div>

    <footer class="row">

    </footer>

    <script src="bower_components/foundation/js/vendor/jquery.js"></script>
    <script src="bower_components/foundation/js/foundation.min.js"></script>
    <script src="bower_components/foundation/js/foundation/foundation.clearing.js"></script>
    <script type="text/javascript" src="bower_components/tabletop/src/tabletop.js"></script>
    <script type="text/javascript" src="bower_components/vue/dist/vue.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script>

        $(document).foundation();

        var map; //<-- This is now available to both event listeners and the initialize() function

        function initialize() {

            map = new google.maps.Map(
                    document.getElementById("map-canvas"),
                    {
                        center: new google.maps.LatLng(40.5472,12.282715),
                        zoom: 6,
                        scrollwheel: false,
                        navigationControl: false,
                        mapTypeControl: false,
                        scaleControl: false,
                        //draggable: false,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    }
            );

        }

        google.maps.event.addDomListener(window, 'load', initialize);
        google.maps.event.addDomListener(window, "resize", function() {
            google.maps.event.trigger(map, "resize");
            map.setCenter(map.getCenter());
        });

    </script>

    <script type="text/javascript">

        window.onload = function() { init() };

        var public_spreadsheet_url = 'https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=1Y2bcsCv6r3GtJk5DOyUle7I021cILTFgLSqEbGTkxCw&output=html';

        function init() {
            Tabletop.init({
                key: public_spreadsheet_url,
                callback: vueInit,
                simpleSheet: true
            });
        }

        function vueInit(data) {
            console.log(data);
            var list = new Vue({
                el: '#parking-list',
                data: {
                    title: 'Parking Garages in Downtown Greenville, SC',
                    data: data
                }
            });
        }

    </script>

</body>
</html>
    